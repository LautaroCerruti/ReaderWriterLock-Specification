-- Como correr setlog
consult('setlog.pl').
setlog.

-- Como cargar la spec
type_check.
consult('reader-writer-lock.slog').
vcg('reader-writer-lock.slog').
consult('reader-writer-lock-vc.slog').
check_vcs_reader-writer-lock.

-- Version 2
type_check.
consult('reader-writer-lock-v2.slog').
vcg('reader-writer-lock-v2.slog').
consult('reader-writer-lock-v2-vc.slog').
check_vcs_reader-writer-lock-v2.


-- TTF SetMaxReaders
ttf(rwlock).
applydnf(setMaxReaders(N)).
applysc(setMaxReaders_dnf_1,Readers).
applysc(setMaxReaders_dnf_2,Readers).
applysc(setMaxReaders_dnf_3,Readers).
prunett.
applyii(setMaxReaders_dnf_3,N,[1,2]).
prunett.
gentc.
writett.
writetc.
exporttt.

-- TTF acquireRead
ttf(rwlock).
applydnf(acquireRead(P)).
applysp(acquireRead_dnf_1,un(Readers, {P}, Readers_)).
prunett.
applysp(acquireRead_dnf_2,un(Readers, {P}, Readers_)).
prunett.
applyii(acquireRead_dnf_3,MaxReaders,[1]).
prunett.
applyst(acquireRead_dnf_4,P).
prunett.
gentc.
writett.
writetc.
exporttt.